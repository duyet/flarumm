var aa=[0],ba=[7952],ca=[7702],da=[7959],ea=[7955],ha=[ga],ia={b:514},m=[qa],ra={b:3073},sa={q:!1},ta={q:!0},va={d:[ua],q:!0},wa={d:ha,q:!1},xa={B:1,C:1,EM:1,EMAIL:1,I:1,S:1,STRONG:1,U:1,URL:1},ya={f:ea,j:1,d:m,k:10,h:{b:2},l:1E3},Ba={f:ea,j:2,d:m,k:10,h:{b:260,t:xa},l:1E3};function Ca(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"};return a.replace(/[<>&"]/g,function(a){return b[a]})}
function Da(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;"};return a.replace(/[<>&]/g,function(a){return b[a]})}function Ea(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})}
function Fa(a){var b=/^(?:([a-z][-+.\w]*):)?(?:\/\/(?:([^:\/?#]*)(?::([^\/?#]*)?)?@)?(?:(\[[a-f\d:]+\]|[^:\/?#]+)(?::(\d*))?)?(?![^\/?#]))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?$/i.exec(a),c={};"scheme user pass host port path query fragment".split(" ").forEach(function(a,f){c[a]=""<b[f+1]?b[f+1]:""});c.scheme=c.scheme.toLowerCase();c.host=c.host.replace(/[\u3002\uff0e\uff61]/g,".").replace(/\.+$/g,"");/[^\x00-\x7F]/.test(c.host)&&punycode&&(c.host=punycode.toASCII(c.host));return c}
function Ga(a){var b="";""!==a.scheme&&(b+=a.scheme+":");""===a.host?"file"===a.scheme&&(b+="//"):(b+="//",""!==a.user&&(b+=Ea(decodeURIComponent(a.user)),""!==a.pass&&(b+=":"+Ea(decodeURIComponent(a.pass))),b+="@"),b+=a.host,""!==a.port&&(b+=":"+a.port));var c=a.path;""!==a.query&&(c+="?"+a.query);""!==a.fragment&&(c+="#"+a.fragment);c=c.replace(/%.?[a-f]/,function(a){return a[0].toUpperCase()},c);b+=c.replace(/[^\u0020-\u007E]+/g,encodeURIComponent).replace(/%(?![0-9A-Fa-f]{2})|[^!#-&*-;=?-Z_a-z]/g,
escape);a.scheme||(b=b.replace(/^([^\/]*):/,"$1%3A",b));return b}
function Ha(a,b){if(""!==b.scheme&&!a.P.test(b.scheme))return"URL scheme is not allowed";if(""===b.host){if("file"!==b.scheme&&""!==b.scheme)return"Missing host"}else{var c;if(c=!/^(?!-)[-a-z0-9]{0,62}[a-z0-9](?:\.(?!-)[-a-z0-9]{0,62}[a-z0-9])*$/i.test(b.host)){a:if(c=b.host,/^\d+\.\d+\.\d+\.\d+$/.test(c))for(var d=4,f=c.split(".");0<=--d;){if("0"===f[d].charAt(0)||255<f[d]){c=!1;break a}}else c=!1;if(c=!c)c=b.host.replace(/^\[(.*)\]$/,"$1",b.host),c=!(/^(\d*:){2,7}\d+(?:\.\d+\.\d+\.\d+)?$/.test(c)&&
c)}if(c)return"URL host is invalid";if(a.Q&&a.Q.test(b.host)||a.$&&!a.$.test(b.host))return"URL host is not allowed"}}function Ka(){}Ka.prototype={n:function(){}};function p(a,b,c,d){this.m=a;this.e=b;this.c=c;this.p=d;this.g={};this.H=[];isNaN(a+c+d)&&r(this)}p.prototype.y=!1;p.prototype.o=0;function La(a,b){a.H.push(b);a.y&&r(b)}function r(a){a.y||(a.y=!0,a.H.forEach(function(a){r(a)}))}
function u(a,b){a.e===b.e&&(1===a.m&&2===b.m&&b.c>=a.c?(a.s=b,b.F=a,La(a,b)):2===a.m&&1===b.m&&b.c<=a.c&&(a.F=b,b.s=a))}function Ma(a){a.o=1E3}function Na(a){var b={},c;for(c in a.g)b[c]=a.g[c];return b}function Oa(a,b){return a.y||a.e!==b.e||1!==b.m||2!==a.m||a.c<b.c||a.F&&a.F!==b||b.s&&b.s!==a?!1:!0}p.prototype.n=function(a,b){this.g[a]=b};function Pa(a,b){a.g={};for(var c in b)a.g[c]=b[c]}
var Qa,Ra,Sa,v,w,z,Ta,Ua=new Ka,A,C,Va={Autoemail:{u:function(a,b){b.forEach(function(a){var b=D(1,"EMAIL",a[0][1],0);b.n("email",a[0][0]);a=D(2,"EMAIL",a[0][1]+a[0][0].length,0);u(b,a)})},z:"@",v:/\b[-a-z0-9_+.]+@[-a-z0-9.]*[a-z0-9]/ig,D:1E4},Autolink:{u:function(a,b){b.forEach(function(b){var d=b[0][1];if(!(0<d&&-1<"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".indexOf(a.charAt(d-1)))){for(b=b[0][0];;)if(b=b.replace(/[\s!"',.<>?]+$/,""),")"===b.substr(-1)&&b.replace(/[^(]+/g,"").length<
b.replace(/[^)]+/g,"").length)b=b.substr(0,b.length-1);else break;if(/^www\.|^[^:]+:/i.test(b)){var f=D(2,"URL",d+b.length,0);"."===b.charAt(3)&&(b="http://"+b);d=D(1,"URL",d,0);d.n("url",b);d.o=1;u(d,f)}}})},z:"://",v:/https?:\/\/\S(?:[^\s\[\]]*(?:\[\w*\])?)+/ig,D:1E4},BBCodes:{u:function(a,b){function c(){var a=D(3,n.r||t,E,g-E);Pa(a,k)}function d(){var a=D(1,n.r||t,E,g-E);Pa(a,k);return a}function f(){var b="[/"+t+x+"]",c=a.toUpperCase().indexOf(b,g);return 0>c?null:D(2,n.r||t,c,b.length)}function e(){var b=
g,c;for(k={};g<W;)if(c=a.charAt(g),-1<" \n\t".indexOf(c))++g;else{if(-1<"/]".indexOf(c))break;var d=/^[-\w]*/.exec(a.substr(g,100))[0].length;if(d){c=a.substr(g,d).toLowerCase();g+=d;if(g>=W)throw"";if("="!==a.charAt(g))continue}else if("="===c&&g===b)c=n.G||t.toLowerCase();else throw"";if(++g>=W)throw"";var d=k,q;if('"'===a.charAt(g)||"'"===a.charAt(g)){q=a.charAt(g);for(var f=g+1;;){g=a.indexOf(q,g+1);if(0>g)throw"";var e=0;do++e;while("\\"===a.charAt(g-e));if(e%2)break}q=a.substr(f,g-f).replace(/\\([\\'"])/g,
"$1");++g}else{q=/[^\]\n]*?(?=\s*(?:\s\/)?\]|\s+[-\w]+=)/.exec(a.substr(g));if(!q)throw"";q=q[0];g+=q.length}d[c]=q}}function h(){x="";":"===a[g]&&(x=/^:\d*/.exec(a.substr(g))[0],g+=x.length);if("/"===a.charAt(E+1))"]"===a.charAt(g)&&""===x&&(++g,D(2,n.r||t,E,g-E));else{e();if(n.N)for(var b in n.N)b in k||(k[b]=n.N[b]);if("]"===a.charAt(g)){++g;var N=[];n.w&&n.w&&n.w.forEach(function(a){a in k||N.push(a)});var B=(b=x||n.aa)||N.length?f():null;if(B)N.forEach(function(b){k[b]=a.substr(g,B.c-g)});else if(b)return;
b=d();B&&u(b,B)}else"/]"===a.substr(g,2)&&(g+=2,c())}}var l={"*":{r:"LI"},B:[],CODE:{G:"lang"},EMAIL:{w:["email"]},I:[],IMG:{w:["src"],G:"src"},LIST:{G:"type"},QUOTE:{G:"author"},S:[],U:[],URL:{w:["url"]}},k,n,t,x,g,E,W=a.length;b.forEach(function(a){t=a[1][0].toUpperCase();if(t in l){n=l[t];E=a[0][1];g=E+a[0][0].length;try{h()}catch(b){}}})},z:"[",v:/\[\/?(\*|[-\w]+)(?=[\]\s=:\/])/g,D:1E4},Emoticons:{u:function(a,b){var c={r:"E"};b.forEach(function(b){c.X&&b[0][1]&&c.X.test(a.charAt(b[0][1]-1))||
D(3,c.r,b[0][1],b[0][0].length)})},v:/(?::(?:[()*DOP|]|'[()])|>:\(|[;B]\))/g,D:1E4},Escaper:{u:function(a,b){b.forEach(function(a){var b=D(3,"v",a[0][1]+1,a[0][0].length-1);b.b=0;b.o=-1E3;La(D(3,"i",a[0][1],1),b)})},z:"\\",v:/\\[-!#()*+.:<>@[\\\]^_`{}]/g,D:1E4},Litedown:{u:function(a){function b(a,b){u(D(2,"LIST",b,0),a.W);u(D(2,"LI",b,0),a.J);a.O&&a.K.forEach(function(a){a.b&=-9})}function c(a){a=a.replace(/[\\\x1A]/g,"");t&&(a=a.replace(/\x1B./g,function(a){return{"\u001b0":"!","\u001b1":'"',"\u001b2":")",
"\u001b3":"*","\u001b4":"[","\u001b5":"\\","\u001b6":"]","\u001b7":"^","\u001b8":"_","\u001b9":"`","\u001bA":"~"}[a]}));return a}function d(a){return a.replace(/\\[!")*[\\\]^_`~]/g,function(a){return{"\\!":"\u001b0",'\\"':"\u001b1","\\)":"\u001b2","\\*":"\u001b3","\\[":"\u001b4","\\\\":"\u001b5","\\]":"\u001b6","\\^":"\u001b7","\\_":"\u001b8","\\`":"\u001b9","\\~":"\u001bA"}[a]})}function f(b,c){return/[ \t]*#*[ \t]*$/.exec(a.substr(b,c-b))[0].length}function e(){var b={};if(-1===a.indexOf("-")&&
-1===a.indexOf("="))return b;for(var c,d=/^(?=[-=>])(?:> ?)*(?=[-=])(?:-+|=+) *$/gm;c=d.exec(a);){var f=c[0];c=c.index;for(var g=c-1;0<g&&" "===a[g-1];)--g;b[c-1]={R:c+f.length-g,T:g,Z:f.length-f.replace(/>/g,"").length,r:"="===f.charAt(0)?"H1":"H2"}}return b}function h(a){return 0<" abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".indexOf(a)}function l(b,c){var d=a.indexOf(b);if(-1!==d){var f=[],g=[],e=e=a.indexOf("\u0017",d),k;for(c.lastIndex=d;k=c.exec(a);)d=k.index,k=k[0].length,
d>e&&(g.push(f),f=[],e=a.indexOf("\u0017",d)),"_"===a[d]&&1===k&&0<d&&h(a[d-1])&&h(a[d+k])||f.push([d,k]);g.push(f);g.forEach(n)}}function k(b,c){a=a.substr(0,b)+Array(1+c).join("\u001a")+a.substr(b+c)}function n(a){var b=0,c=-1,d=-1,f;a.forEach(function(a){var g=a[0];a=a[1];var ja=Math.min(3,a),e=ja&b&1,ja=ja&b&2,k=g,n=g;2<b&&c===d&&(e?c+=2:++d);e&&ja&&(c<d?k+=2:++n);f=a;e&&(--b,--f,I("EM",c,1,k,1));ja&&(b-=2,f-=2,I("STRONG",d,2,n,2));f=Math.min(3,f);f&1&&(c=g+a-f);f&2&&(d=g+a-f);b+=f})}var t,x,
g,E,W;0>a.indexOf("\\")?t=!1:(t=!0,a=d(a));a+="\n\n\u0017";(function(){for(var c=[],d,n=4,q,h=!0,t=[],l=0,ka=!1,$a=[],la=0,ma=e(),K=0,na,P,fa,L,Ia,ab,F,y,oa,za,X,M,U,bb=[],Ja,Aa=/^(?:(?=[-*+\d \t>`~#_])((?: {0,3}> ?)+)?([ \t]+)?(\* *\* *\*[* ]*$|- *- *-[- ]*$|_ *_ *_[_ ]*$)?((?:[-*+]|\d+\.)[ \t]+(?=\S))?[ \t]*(#{1,6}[ \t]+|```+.*|~~~+.*)?)?/gm;Ja=Aa.exec(a);)bb.push(Ja),Ja.index===Aa.lastIndex&&++Aa.lastIndex;bb.forEach(function(e){var G=e.index,pa=e[0].length;L=0;P=!h;F=a.indexOf("\n",G);h=F===G+
pa&&!e[3]&&!e[4]&&!e[5];pa||++Aa.lastIndex;na=h&&P;e[1]?(X=e[1].length-e[1].replace(/>/g,"").length,L=e[1].length):X=0;if(X<la&&!P&&!h){ka=!0;do u(D(2,"QUOTE",K,0),$a.pop());while(X<--la)}if(X>la&&!h){ka=!0;do{var Q=D(1,"QUOTE",G,0);Q.o=la;$a.push(Q)}while(X>++la)}var H=0,R=0;if(e[2]){Ia=e[2];ab=Ia.length;oa=d?0:n;do" "===Ia.charAt(R)?++H:H=H+4&-4;while(++R<ab&&H<oa)}q&&!d&&H<n&&!h&&(ka=!0);ka&&(ka=!1,q&&(k(q.c,K-q.c),fa=D(2,"CODE",K,0),u(fa,q),fa.o=-1,d=q=null),t.forEach(function(a){b(a,K)}),t=[],
l=0,G&&c.push(G-1));if(H>=n){if(q||!P)L=(e[1]||"").length+R,q||(q=D(1,"CODE",G+L,0)),e={}}else{Q=!!e[4];if(H||P||Q||h)if(P&&!Q)y=l-1;else if(l)for(y=0;y<l&&H>t[y].M;)++y;else y=!P&&Q?0:-1;else y=-1;for(;y<l-1;)b(t.pop(),K),--l;y!==l||Q||--y;Q&&0<=y&&(na=!0,M=G+L+R,U=e[4].length,R=D(1,"LI",M,U),k(M,U),y<l?(u(D(2,"LI",K,0),t[y].J),t[y].J=R,t[y].K.push(R)):(++l,y?(za=t[y-1].M+1,oa=Math.max(za,4*y)):(za=0,oa=H),H=D(1,"LIST",M,0),-1<e[4].indexOf(".")&&H.n("type","decimal"),t.push({W:H,J:R,K:[R],ba:za,
M:oa,O:!0})));!l||P||h||(1<t[0].K.length||!Q)&&t.forEach(function(a){a.O=!1});n=4*(l+1)}if(e[5])if("#"===e[5].charAt(0))x=e[5].length,g=G+pa-x,W=f(G+pa,F),E=F-W,I("H"+/#{1,6}/.exec(e[5])[0].length,g,x,E,W),c.push(g),c.push(E),P&&(na=!0);else{if("`"===e[5].charAt(0)||"~"===e[5].charAt(0))M=G+L,U=F-M,q&&e[5].charAt(0)===d?(fa=D(2,"CODE",M,U),u(fa,q),fa.o=-1,D(3,"i",K,M-K),k(q.c,M+U-q.c),d=q=null):q||(q=D(1,"CODE",M,U),d=e[5].charAt(0),D(3,"i",M+U,1),e=e[5].replace(/^[`~]*/,""),""!==e&&q.n("lang",e))}else e[3]&&
!l?(D(3,"HR",G+L,pa-L),na=!0,k(F,1)):!ma[F]||ma[F].Z!==X||h||l||q||(I(ma[F].r,G+L,0,ma[F].T,ma[F].R),k(F,1));na&&(D(3,"pb",K,0),c.push(K));h||(K=F);L&&Ma(D(3,"i",G,L))});c.forEach(function(b){a=a.substr(0,b)+"\u0017"+a.substr(1+b)})})();(function(){if(-1!==a.indexOf("`"))for(var b,c=/(``?)[^\x17]*?[^`]\1(?!`)/g;b=c.exec(a);){var d=b.index,e=b[0].length;b=b[1].length;I("C",d,b,d+e-b,b);k(d,e)}})();(function(){if(-1!==a.indexOf("!["))for(var b,d=/!\[([^\x17\]]*)] ?\(([^\x17 ")]+)(?: "([^\x17"]*)")?\)/g;b=
d.exec(a);){var e=b.index,f=b[0].length,g=b[1].length,n=e,g=I("IMG",n,2,n+2+g,f-2-g);g.n("alt",c(b[1]));g.n("src",c(b[2]));""<b[3]&&g.n("title",c(b[3]));k(e,f)}})();(function(){if(-1!==a.indexOf("["))for(var b,d=/\[([^\x17\]]+)] ?\(([^\x17 ()]+(?:\([^\x17 ()]+\)[^\x17 ()]*)*[^\x17 )]*)(?: "(.*?)")?\)/g;b=d.exec(a);){var e=b[1].length,f=b.index,g=f+1+e,e=b[0].length-1-e,n=I("URL",f,1,g,e);n.n("url",c(b[2]));""<b[3]&&n.n("title",c(b[3]));n.o=-1;k(f,1);k(g,e)}})();(function(){if(-1!==a.indexOf("~~"))for(var b,
c=/~~[^\x17]+?~~/g;b=c.exec(a);){var d=b.index;I("DEL",d,2,d+b[0].length-2,2)}})();(function(){if(-1!==a.indexOf("^"))for(var b,c=/\^[^\x17\s]+/g;b=c.exec(a);){var d=b[0],e=b=b.index,f=b+d.length,d=d.split("^");d.shift();d.forEach(function(a){I("SUP",e,1,f,0);e+=1+a.length})}})();l("*",/\*+/g);l("_",/_+/g);(function(){for(var b=a.indexOf("  \n");-1!==b;)D(3,"br",b+2,0),b=a.indexOf("  \n",b+3)})()}},Preg:{u:function(a){[["USERMENTION",/\B@([a-z0-9_-]+)(?!#)/ig,0,["","username"]],["POSTMENTION",/\B@([a-z0-9_-]+)#(\d+)/ig,
0,["","username","id"]]].forEach(function(b){var c=b[0],d=b[1],f=b[2];b=b[3];var e;for(d.lastIndex=0;e=d.exec(a);){var h=e.index,l=e[0].length,k;if(f&&""!==e[f]){var n=a.indexOf(e[f],h),t=e[f].length,x=n-h;k=I(c,h,x,n+t,l-(x+t))}else k=D(3,c,h,l);b.forEach(function(a,b){a&&"undefined"!==typeof e[b]&&k.n(a,e[b])})}})}}},J,Wa={urlConfig:{P:/^https?$/i}},Xa={f:da,b:40},O={B:ya,C:{f:aa,j:1,d:m,k:10,h:{b:66},l:1E3},CODE:{f:aa,g:{lang:{d:[Ya],q:!1}},j:2,d:m,k:10,h:{b:4436,t:xa},l:1E3},DEL:{f:da,j:1,d:m,
k:10,h:{b:512},l:1E3},E:{f:ba,j:4,d:m,k:10,h:ra,l:1E3},EM:ya,EMAIL:{f:ca,g:{email:{d:[Za],q:!0}},j:0,d:m,k:10,h:ia,l:1E3},H1:Ba,H2:Ba,H3:Ba,H4:Ba,H5:Ba,H6:Ba,HR:{f:ba,j:2,d:m,k:10,h:{b:3333,t:xa},l:1E3},I:ya,IMG:{f:ba,g:{alt:sa,src:va,title:sa},j:1,d:m,k:10,h:ra,l:1E3},LI:{f:da,j:3,d:m,k:10,h:{L:{LI:1},b:264,t:xa},l:1E3},LIST:{f:[7944],g:{type:{d:[cb,db],q:!1}},j:2,d:m,k:10,h:{b:3460,t:xa},l:1E3},POSTMENTION:{f:ba,g:{discussionid:wa,id:{d:ha,q:!0},number:wa,username:ta},j:0,d:[eb,qa],k:10,h:ra,l:1E3},
QUOTE:{f:da,g:{author:sa},j:2,d:m,k:10,h:{b:268,t:xa},l:1E3},S:ya,STRONG:ya,SUP:{f:ea,j:1,d:m,k:10,h:{b:0},l:1E3},U:ya,URL:{f:ca,g:{title:sa,url:va},j:0,d:m,k:10,h:ia,l:1E3},USERMENTION:{f:ba,g:{id:wa,username:ta},j:0,d:[fb,qa],k:10,h:ra,l:1E3}},S,gb,V,hb,ib=0,Y;
function jb(a){a=a.replace(/\r\n?/g,"\n");a=a.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]+/g,"");Ra={};Sa={};Qa=[];w=0;z=null;Ta=!1;A=[];C="";J=0;S=[];gb=!0;V=a;hb=V.length;Y=0;v=Xa;v.x=!1;++ib;a=ib;for(var b in Va)if(!Va[b].V)a:{var c=b,d=Va[c];if(!(d.z&&0>V.indexOf(d.z))){var f=[];if(d.v){f=d.v;d=d.D;f.lastIndex=0;for(var e=[],h=0,l=void 0;++h<=d&&(l=f.exec(V));){for(var k=+l.index,n=[[l[0],k]],t=0;++t<l.length;){var x=l[t];void 0===x?n.push(["",-1]):(n.push([x,V.indexOf(x,k)]),k+=x.length)}e.push(n)}f=
e;if(!f.length)break a}(0,Va[c].u)(V,f)}}kb();lb();Z(hb,0,!0);do b=C,C=C.replace(/<([^ />]+)><\/\1>/g,"");while(C!==b);C=C.replace(/<\/i><i>/g,"",C);C=C.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,mb);b=Ta?"r":"t";C="<"+b+">"+C+"</"+b+">";if(ib!==a)throw"The parser has been reset during execution";return C}function lb(){Qa.forEach(function(a){a.H=[];delete a.s;delete a.F});Qa=[]}function mb(a){return"&#"+((a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888)+";"}
function nb(a){Ta=!0;var b=a.e,c=a.c,d=a.p,f=a.b,e=0,h=0;f&256&&(e=1,h=a.m&2?2:1);var l=!1;a.m&1?f&4&&(l=!0):l=!0;Z(c,e,l);e=d?Da(V.substr(c,d)):"";if(a.m&1){f&4||ob(c);C+="<"+b;var k=Na(a),f=[],n;for(n in k)f.push(n);f.sort(function(a,b){return a>b?1:-1});f.forEach(function(a){C+=" "+a+'="'+Ca(k[a].toString())+'"'});C=3===a.m?d?C+(">"+e+"</"+b+">"):C+"/>":d?C+("><s>"+e+"</s>"):C+">"}else d&&(C+="<e>"+e+"</e>"),C+="</"+b+">";for(Y=J=c+d;h&&Y<hb&&"\n"===V.charAt(Y);)--h,++Y}
function Z(a,b,c){c&&(v.b&8?b=-1:c=!1);J>=a&&c&&pb();if(Y>J){var d=Math.min(a,Y);C+=V.substr(J,d-J);J=d;J>=a&&c&&pb()}if(v.b&128)d=a-J,b=V.substr(J,d),/^[ \n\t]*$/.test(b)||(b="<i>"+b+"</i>"),C+=b,J=a,c&&pb();else{for(var f=a,d=0;b&&--f>=J;){var e=V.charAt(f);if(" "!==e&&"\n"!==e&&"\t"!==e)break;"\n"===e&&--b;++d}a-=d;if(v.b&8)for(v.x||(qb(a),a>J&&ob(a)),b=V.indexOf("\n\n",J);-1<b&&b<a;)Z(b,0,!0),ob(a),b=V.indexOf("\n\n",J);a>J&&(b=Da(V.substr(J,a-J)),32===(v.b&2096)&&(b=b.replace(/\n/g,"<br/>\n")),
C+=b);c&&pb();d&&(C+=V.substr(a,d));J=a+d}}function rb(a){var b=a.c;a=a.p;var c=V.substr(b,a);Z(b,0,!1);C+="<i>"+Da(c)+"</i>";Ta=!0;J=b+a}function ob(a){!v.x&&v.b&8&&(qb(a),J<hb&&(C+="<p>",v.x=!0))}function pb(){v.x&&(C+="</p>",v.x=!1)}function qb(a){for(;J<a&&-1<" \n\t".indexOf(V.charAt(J));)C+=V.charAt(J),++J}function sb(a,b){var c=a.e;a.b&256&&(b=tb(b));u(D(2,c,b,0),a)}function tb(a){for(;a>J&&-1<" \n\t".indexOf(V.charAt(a-1));)--a;return a}
function kb(){if(S.length){for(var a in O)Ra[a]=0,Sa[a]=0;do{for(;S.length;)gb||(S.sort(ub),gb=!0),z=S.pop(),v.b&64&&!(Oa(z,A[A.length-1])||-1<"br i pb v".indexOf(z.e))||vb();A.forEach(function(a){sb(a,hb)})}while(S.length)}}
function vb(){if(!z.y){var a=z.c,b=z.p;if(J>a){var c;if((c=z.F)&&0<=A.indexOf(c))u(D(2,c.e,J,Math.max(0,a+b-J)),c);else{if("i"===z.e&&(a=a+b-J,0<a)){D(3,"i",J,a);return}r(z)}}else if("i"===z.e)rb(z);else if("br"===z.e)v.b&1024||(Z(z.c,0,!1),C+="<br/>");else if("pb"===z.e)Z(z.c,0,!0);else if("v"===z.e)a=v.b,v.b=z.b,Z(z.c+z.p,0,!1),v.b=a;else if(z.m&1)if(a=z,b=a.e,c=O[b],Sa[b]>=c.l)r(a);else{var d=a,f=O[d.e],e=!0;if(f.d)for(var h=0;h<f.d.length;++h)if(!f.d[h](d,f)){e=!1;break}if(e){a:{d=a;if(A.length&&
(e=d.e,h=O[e],h.h.t)){var f=A[A.length-1],l=f.e;if(h.h.t[l]){l!==e&&1E3>w&&(e=wb(f,d.c+d.p),La(d,e));++w;S.push(d);sb(f,d.c);d=!0;break a}}d=!1}if(!d)a:{d=a;if(A.length&&(f=O[d.e],f.h.L&&(e=A[A.length-1],f.h.L[e.e]))){S.push(d);sb(e,d.c);d=!0;break a}d=!1}d||(Ra[b]>=c.k?r(a):(c=O[b].j,v.f[c>>3]&1<<(c&7)?(!(a.b&1)||a.s||S.length&&Oa(S[S.length-1],a)||(b=new p(3,b,a.c,a.p),Pa(b,Na(a)),b.b=a.b,a=b),a.b&4096&&!a.s&&"\n"===V.charAt(a.c+a.p)&&D(3,"i",a.c+a.p,1),nb(a),xb(a)):r(a)))}else r(a)}else yb()}}
function yb(){var a=z;if(Ra[a.e]){for(var b=[],c=A.length;0<=--c;){var d=A[c];if(Oa(a,d))break;b.push(d);++w}if(!(0>c)){var f=1E3>w,e=[];b.forEach(function(b){var c=b.e;f&&(b.b&2?e.push(b):f=!1);var d=a.c;b.b&256&&(d=tb(d));c=new p(2,c,d,0);c.b=b.b;nb(c);zb()});nb(a);zb();if(b.length&&1E3>w){d=J;for(c=S.length;0<=--c&&1E3>++w;){var h=S[c];if(h.c>d||h.m&1)break;for(var l=b.length;0<=--l&&1E3>++w;)if(Oa(h,b[l])){b.splice(l,1);e[l]&&e.splice(l,1);d=Math.max(d,h.c+h.p);break}}d>J&&rb(new p(3,"i",J,d-
J))}e.forEach(function(a){var b=wb(a,J);(a=a.s)&&u(b,a)})}}}function zb(){var a=A.pop();--Ra[a.e];v=v.Y}function xb(a){var b=a.e,c=a.b,d=O[b];++Sa[b];if(3!==a.m){var f=[];c&512?v.f.forEach(function(a,b){f.push(d.f[b]&a)}):v.f.forEach(function(a,b){f.push(d.f[b]&(a&65280|a>>8))});c|=v.b&32;c&16&&(c&=-33);++Ra[b];A.push(a);v={f:f,b:c,Y:v}}}function wb(a,b){var c=D(a.m,a.e,b,0);Pa(c,Na(a));c.o=a.o;return c}
function D(a,b,c,d){a=new p(a,b,c,d);Qa.push(a);O[b]&&(a.b=O[b].h.b);O[b]||-1<"br i pb v".indexOf(a.e)?O[b]&&O[b].V?r(a):0>d||0>c||c+d>hb?r(a):(gb&&S.length&&a.c>=S[S.length-1].c&&(gb=!1),S.push(a)):r(a);return a}function I(a,b,c,d,f){b=D(1,a,b,c);u(b,D(2,a,d,f));return b}function ub(a,b){var c=a.c,d=b.c;if(c!==d)return d-c;if(a.o!==b.o)return b.o-a.o;c=a.p;d=b.p;return c&&d?c-d:c||d?c?-1:1:(c={2:0,3:1,1:2},c[b.m]-c[a.m])}var Ab="undefined"===typeof DOMParser||"undefined"===typeof XSLTProcessor;
function Bb(a,b){if(Ab){var c=new ActiveXObject(b);c.async=!1;c.validateOnParse=!1;c.loadXML(a);return c}return(new DOMParser).parseFromString(a,"text/xml")}function Cb(a,b){if(Ab){var c=b.createElement("div"),d=b.createDocumentFragment();Db.input=Bb(a,"MSXML2.DOMDocument.6.0");Db.transform();for(c.innerHTML=Db.output;c.firstChild;)d.appendChild(c.removeChild(c.firstChild));return d}return b.importNode(Db.transformToFragment(Bb(a),b),!0)}
var Db,Eb=Bb('<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"><xsl:output method="html" encoding="utf-8" indent="no"/><xsl:param name="PROFILE_URL"/><xsl:template match="B|DEL|EM|H1|H2|H3|H4|H5|H6|I|LI|S|STRONG|SUP|U|p"><xsl:element name="{translate(name(),\'BDEGHILMNOPRSTU\',\'bdeghilmnoprstu\')}"><xsl:apply-templates/></xsl:element></xsl:template><xsl:template match="C"><code><xsl:apply-templates/></code></xsl:template><xsl:template match="CODE"><pre data-s9e-livepreview-postprocess="if(\'undefined\'!==typeof hljs){{var a=this.innerHTML;a in hljs._?this.innerHTML=hljs._[a]:(Object.keys&amp;&amp;7&lt;Object.keys(hljs._).length&amp;&amp;(hljs._={{}}),hljs.highlightBlock(this.firstChild),hljs._[a]=this.innerHTML)}}"><code class="{@lang}"><xsl:apply-templates/></code></pre><script>if("undefined"===typeof hljs){var a=document.getElementsByTagName("head")[0],b=document.createElement("link");b.type="text/css";b.rel="stylesheet";b.href=\'//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/styles/default.min.css\';a.appendChild(b);b=document.createElement("script");b.type="text/javascript";b.onload=function(){hljs._={};hljs.initHighlighting()};b.async=!0;b.src=\'//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js\';a.appendChild(b)}\x3c/script></xsl:template><xsl:template match="E"><xsl:choose><xsl:when test=".=\':)\'">\ud83d\ude04</xsl:when><xsl:when test=".=\':D\'">\ud83d\ude03</xsl:when><xsl:when test=".=\':P\'">\ud83d\ude1c</xsl:when><xsl:when test=".=\':(\'">\ud83d\ude1f</xsl:when><xsl:when test=".=\':|\'">\ud83d\ude10</xsl:when><xsl:when test=".=\';)\'">\ud83d\ude09</xsl:when><xsl:when test=".=\':*\'">\ud83d\ude18</xsl:when><xsl:when test=".=&quot;:\'(&quot;">\ud83d\ude22</xsl:when><xsl:when test=".=&quot;:\')&quot;">\ud83d\ude02</xsl:when><xsl:when test=".=\':O\'">\ud83d\ude2e</xsl:when><xsl:when test=".=\'B)\'">\ud83d\ude0e</xsl:when><xsl:when test=".=\'&gt;:(\'">\ud83d\ude21</xsl:when><xsl:otherwise><xsl:value-of select="."/></xsl:otherwise></xsl:choose></xsl:template><xsl:template match="EMAIL"><a href="mailto:{@email}"><xsl:apply-templates/></a></xsl:template><xsl:template match="HR"><hr/></xsl:template><xsl:template match="IMG"><img src="{@src}" title="{@title}" alt="{@alt}"/></xsl:template><xsl:template match="LIST"><xsl:choose><xsl:when test="not(@type)"><ul><xsl:apply-templates/></ul></xsl:when><xsl:when test="starts-with(@type,\'decimal\')or starts-with(@type,\'lower\')or starts-with(@type,\'upper\')"><ol style="list-style-type:{@type}"><xsl:apply-templates/></ol></xsl:when><xsl:otherwise><ul style="list-style-type:{@type}"><xsl:apply-templates/></ul></xsl:otherwise></xsl:choose></xsl:template><xsl:template match="POSTMENTION"><a href="/d/{@discussionid}/{@number}" class="PostMention" data-id="{@id}"><xsl:value-of select="@username"/></a></xsl:template><xsl:template match="QUOTE"><blockquote><xsl:if test="not(@author)"><xsl:attribute name="class">uncited</xsl:attribute></xsl:if><div><xsl:if test="@author"><cite><xsl:value-of select="@author"/> wrote:</cite></xsl:if><xsl:apply-templates/></div></blockquote></xsl:template><xsl:template match="URL"><a href="{@url}" target="_blank" rel="nofollow"><xsl:copy-of select="@title"/><xsl:apply-templates/></a></xsl:template><xsl:template match="USERMENTION"><a href="{$PROFILE_URL}{@username}" class="UserMention">@<xsl:value-of select="@username"/></a></xsl:template><xsl:template match="br"><br/></xsl:template><xsl:template match="e|i|s"/></xsl:stylesheet>',"MSXML2.FreeThreadedDOMDocument.6.0");
if(Ab){var Fb=new ActiveXObject("MSXML2.XSLTemplate.6.0");Fb.stylesheet=Eb;Db=Fb.createProcessor()}else Db=new XSLTProcessor,Db.importStylesheet(Eb);var Gb={};function qa(a,b){var c;a:{c=Ua;if(b.g){var d,f,e=Na(a);for(d in e){var h=e[d];if(b.g[d]){if(f=b.g[d],f.d){c.n(d);for(var l=0;l<f.d.length;++l)if(h=f.d[l](h,d),!1===h){delete a.g[d];break}!1!==h&&a.n(d,h)}}else delete a.g[d]}for(d in b.g)if(f=b.g[d],!(d in a.g)&&f.q){c=!1;break a}}else Pa(a,{});c=!0}return c}
function ua(a){var b=Wa.urlConfig,c=Ua,d=Fa(a.replace(/^\s+/,"").replace(/\s+$/,""));Ha(b,d)?(c&&(d.attrValue=a),a=!1):a=Ga(d);return a}function db(a){return/^[-\w+., ]+$/.test(a)?a:!1}function eb(){return!0}function ga(a){return/^(?:0|[1-9]\d*)$/.test(a)?a:!1}function fb(){return!0}function Ya(a){return/^[-\w]+$/.test(a)?a:!1}function cb(a){var b={A:"upper-alpha",I:"upper-roman",a:"lower-alpha",i:"lower-roman",1:"decimal"};return a in b?b[a]:a}
function Za(a){return/^[-\w.+]+@[-\w.]+$/.test(a)?a:!1}
window.s9e={TextFormatter:{preview:function(a,b){function c(a,b){for(var c=a.childNodes,e=b.childNodes,h=c.length,l=e.length,k,N,B=0,q=0;B<h&&B<l;){k=c[B];N=e[B];if(!d(k,N))break;++B}for(var T=Math.min(h-B,l-B);q<T;){k=c[h-(q+1)];N=e[l-(q+1)];if(!d(k,N))break;++q}k=f.createDocumentFragment();for(T=B;T<l-q;)N=e[T].cloneNode(!0),k.appendChild(N),++T;for(T=h-q;--T>=B;)a.removeChild(c[T]);q?a.insertBefore(k,a.childNodes[B]):a.appendChild(k)}function d(a,b){if(a.nodeName!==b.nodeName||a.nodeType!==b.nodeType)return!1;
if(3===a.nodeType||8===a.nodeType)return a.nodeValue!==b.nodeValue&&(a.nodeValue=b.nodeValue),!0;if(a.isEqualNode&&a.isEqualNode(b))return!0;for(var d=a.attributes,e=b.attributes,f=e.length,k=d.length;0<=--k;){var h=d[k],l=h.namespaceURI,h=h.name;b.hasAttributeNS(l,h)||a.removeAttributeNS(l,h)}for(k=f;0<=--k;)d=e[k],l=d.namespaceURI,h=d.name,d=d.value,d!==a.getAttributeNS(l,h)&&a.setAttributeNS(l,h,d);c(a,b);return!0}for(var f=b.ownerDocument,e=Cb(jb(a),f),h=e.querySelectorAll("[data-s9e-livepreview-postprocess]"),
l=h.length;0<=--l;){var k=h[l].getAttribute("data-s9e-livepreview-postprocess");Gb[k]||(Gb[k]=new Function(k));Gb[k].call(h[l])}c(b,e)}}};